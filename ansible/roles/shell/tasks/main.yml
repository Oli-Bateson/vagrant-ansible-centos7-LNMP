---
- name: add bash_profile file
  become: true
  become_user: vagrant
  template:
    src: bash_profile
    dest: ~/.bash_profile

- name: add bashrc file
  become: true
  become_user: vagrant
  template:
    src: bashrc
    dest: ~/.bashrc
  changed_when: false

- name: insert custom bash scripts
  become: true
  become_user: vagrant
  lineinfile:
    path: ~/.bashrc
    line: '{{ item }}'
    insertafter: 'EOF'
  with_items: "{{ bash | default([]) }}"
  changed_when: false

- name: enable Zend PHP 5.6 via supplied enabling script
  become: true
  become_user: vagrant
  lineinfile:
    path: ~/.bashrc
    line: '{{ item }}'
    insertafter: 'EOF'
  with_items: "source /opt/zend/php56zend/enable"
  when: php_version == "Zend5.6"
  changed_when: false

- name: enable PHP 7.4 via supplied enabling script
  become: true
  become_user: vagrant
  lineinfile:
    path: ~/.bashrc
    line: '{{ item }}'
    insertafter: 'EOF'
  with_items: "source /opt/remi/php74/enable"
  when: php_version == "7.4"
  changed_when: false

- name: enable PHP 8.1 via supplied enabling script
  become: true
  become_user: vagrant
  lineinfile:
    path: ~/.bashrc
    line: '{{ item }}'
    insertafter: 'EOF'
  with_items: "source /opt/remi/php81/enable"
  when: php_version == "8.1"
  changed_when: false